networks:
  sagemaker-local:
    name: sagemaker-local
services:
  algo-1:
    entrypoint:
    - /bin/bash
    - -c
    - chmod +x /opt/ml/input/data/sm_drivers/sm_train.sh && /opt/ml/input/data/sm_drivers/sm_train.sh
    environment:
    - TRAINING_JOB_NAME=local-mode-multi-container-20251124175521
    - AWS_REGION=us-west-2
    - AWS_ACCESS_KEY_ID=<your-access-key-id>
    - AWS_SECRET_ACCESS_KEY=<your-secret-access-key>
    - AWS_SESSION_TOKEN=<your-session-token>
    image: 763104351884.dkr.ecr.us-west-2.amazonaws.com/pytorch-training:2.0.0-cpu-py310
    networks:
      sagemaker-local:
        aliases:
        - algo-1
    volumes:
    - /tmp/sagemaker-local/data/train:/opt/ml/input/data/train
    - /tmp/sagemaker-local/data/test:/opt/ml/input/data/test
    - /tmp/sagemaker-local/source:/opt/ml/input/data/code
    - ./aii3xf60:/opt/ml/input/data/sm_drivers
    - /tmp/sagemaker-local/algo-1/model:/opt/ml/model
    - /tmp/sagemaker-local/algo-1/output:/opt/ml/output
    - /tmp/sagemaker-local/algo-1/input:/opt/ml/input
  algo-2:
    entrypoint:
    - /bin/bash
    - -c
    - chmod +x /opt/ml/input/data/sm_drivers/sm_train.sh && /opt/ml/input/data/sm_drivers/sm_train.sh
    environment:
    - TRAINING_JOB_NAME=local-mode-multi-container-20251124175521
    - AWS_REGION=us-west-2
    - AWS_ACCESS_KEY_ID=<your-access-key-id>
    - AWS_SECRET_ACCESS_KEY=<your-secret-access-key>
    - AWS_SESSION_TOKEN=<your-session-token>
    image: 763104351884.dkr.ecr.us-west-2.amazonaws.com/pytorch-training:2.0.0-cpu-py310
    networks:
      sagemaker-local:
        aliases:
        - algo-2
    volumes:
    - /tmp/sagemaker-local/data/train:/opt/ml/input/data/train
    - /tmp/sagemaker-local/data/test:/opt/ml/input/data/test
    - /tmp/sagemaker-local/source:/opt/ml/input/data/code
    - ./aii3xf60:/opt/ml/input/data/sm_drivers
    - /tmp/sagemaker-local/algo-2/model:/opt/ml/model
    - /tmp/sagemaker-local/algo-2/output:/opt/ml/output
    - /tmp/sagemaker-local/algo-2/input:/opt/ml/input
